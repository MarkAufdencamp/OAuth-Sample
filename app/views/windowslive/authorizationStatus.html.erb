<script>
	dojo.require("dijit.Dialog");
	var signinCode = function(){		
		dijit.byId('signinCode').show();
		}
	var signinToken = function(){		
		dijit.byId('signinToken').show();
		}
	var accessCode = function(){		
		dijit.byId('accessCode').show();
		}
	var accessToken = function(){		
		dijit.byId('accessToken').show();
		}
</script>


<div class="Service">
	<div class="ServiceHeader">
		<div class="ServiceHeaderGroup">
			<div class="ServiceIcon">
				<%= link_to image_tag("windows-live-logo.jpg"), :controller => 'windowslive'  %>
			</div>
			<div class="ServiceTitle">
				<h1>Windows Live</h1>
			</div>
			<div class="ServiceLinks">
				<p><a href="http://msdn.microsoft.com/en-us/windowslive/" target="_blank" ><h2>Documentation</h2></a></p>
				<p><a href="https://manage.dev.live.com/Applications/Index" target="_blank" ><h2>API Keys</h2></a></p>
			</div>
		</div>
	</div>
	
	<div class="ServiceBody">
		<div class="ServiceBodyGroup">
		<% if session[:windowsLiveSigninToken] %>
			<div class="ServiceFeature">
				<div class="ServicePanel MenuItem Green">
					<div class="ServicePanel MenuItemIcon">
						<%= link_to image_tag("authorized-256Px-146.png", :class => "ServicePanel MenuItemIcon"), :controller=> 'windowslive', :action=> 'index' %>
					</div>
					<div class="ServicePanel MenuItemTitle">
						<%= link_to "Signin with WindowsLive Account", :controller => 'windowslive', :action=> 'index' %>	
					</div>
				</div>
			</div>
		<% end %>
		<% if session[:windowsLiveSigninToken] %>		
			<div class="ServiceFeature">
				<div class="ServicePanel MenuItem Green">
					<div class="UserSigninInfo">
						<ul class="UserSigninInfo">
							<li><h2>WindowsLive Id</h2><p class="Id"> <%= session[:windowsLiveId] %></p></li>
							<li><h2>WindowsLive User Name</h2><p class="Name"> <%= session[:windowsLiveUserName] %></p></li>
							<li><h2>WindowsLive EMail</h2><p class="EMail"> <%= session[:windowsLiveEMail] %></p></li>
						</ul>
					</div>
				</div>
			</div>
		<% end %>
		<% if session[:windowsLiveAccessToken] %>
			<div class="ServiceFeature">
				<div class="ServicePanel MenuItem Green">
					<div class="ServicePanel MenuItemIcon">
						<%= link_to image_tag("authorized-256Px-146.png", :class => "ServicePanel MenuItemIcon"), :controller=> 'windowslive', :action=> 'index' %>
					</div>
					<div class="ServicePanel MenuItemTitle">
						<%= link_to "Windows Live Account Access Authorized", :controller => 'windowslive', :action=> 'index' %>	
					</div>
				</div>	
			</div>				
		<% end %>
		<% if !session[:windowsLiveAccessToken] %>
			<div class="ServiceFeature">
				<div class="ServicePanel MenuItem Red">	
					<div class="ServicePanel MenuItemIcon">
						<%= link_to image_tag("unauthorized-256Px-145.png", :class => "ServicePanel MenuItemIcon"), :controller=> 'windowslive', :action=> 'index' %>
					</div>
					<div class="ServicePanel MenuItemTitle">
						<%= link_to "Windows Live Account Access NOT Authorized", :controller => 'windowslive', :action=> 'index' %>	
					</div>
				</div>
			</div>						
		<% end %>
		<% if session[:windowsLiveSigninToken] %>
		<div class="ServiceFeature">							
			<div class="ServicePanel MenuItem Green">	
				<ul class="SigninTokenInfo">
						<a href="javascript:signinCode()"><li><h2>Signin Code</h2><%= image_tag("keys-256Px-144.png")  %></li></a>
						<a href="javascript:signinToken()"><li><h2>Signin Token</h2><%= image_tag("keys-256Px-144.png")  %></li></a>
				</ul>
			</div>
		</div>
		<% end %>
		<% if session[:windowsLiveAccessToken] %>
		<div class="ServiceFeature">							
			<div class="ServicePanel MenuItem Green">	
				<ul class="AccessTokenInfo">
					<a href="javascript:accessCode()"><li><h2>Access Code</h2><%= image_tag("keys-256Px-144.png")  %></li></a>
					<a href="javascript:accessToken()"><li><h2>Access Token</h2><%= image_tag("keys-256Px-144.png")  %></li></a>
				</ul>
			</div>
		</div>
		<% end %>
	</div>
	
	<div id="signinCode" dojoType="dijit.Dialog">
		<h2>Signin Code</h2>
		<p style="overflow: auto;"><%= session[:windowsLiveSigninCode] %></p>
	</div>
	
	<div id="signinToken" dojoType="dijit.Dialog">
		<h2>Signin Token</h2>
		<p style="overflow: auto;"><%= session[:windowsLiveSigninToken] %></p>
	</div>
	<div id="accessCode" dojoType="dijit.Dialog">
		<h2>Access Code</h2>
		<p style="overflow: auto;"><%= session[:windowsLiveAccessCode] %></p>
	</div>
	
	<div id="accessToken" dojoType="dijit.Dialog">
		<h2>Access Token</h2>
		<p style="overflow: auto;"><%= session[:windowsLiveAccessToken] %></p>
		<h2>Refresh Token</h2>
		<p style="overflow: auto;"><%= session[:windowsLiveRefreshToken] %></p>
		<h2>Authentication Token</h2>
		<p style="overflow: auto;"><%= session[:windowsLiveAuthenticationToken] %></p>
		<h2>Access Token Birth</h2><p class="Id"> <%= session[:windowsLiveTokenBirth] %></p>
		<h2>Access Token Life (plugged)</h2><p class="Id"> <%= session[:windowsLiveTokenExpiresIn] %></p>
	</div>

</div>